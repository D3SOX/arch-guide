import{_ as a,c as i,o as e,ag as t}from"./chunks/framework.LkKBe053.js";const c=JSON.parse('{"title":"Install Bootloader","description":"","frontmatter":{},"headers":[],"relativePath":"installation/install-bootloader.md","filePath":"installation/install-bootloader.md","lastUpdated":1761788806000}'),n={name:"installation/install-bootloader.md"};function l(o,s,p,h,r,d){return e(),i("div",null,[...s[0]||(s[0]=[t(`<h1 id="install-bootloader" tabindex="-1">Install Bootloader <a class="header-anchor" href="#install-bootloader" aria-label="Permalink to &quot;Install Bootloader&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>When doing disk encryption, finish the steps on the <a href="/encryption/#adjust-linux-kernel-hooks">encryption page</a>. It will guide you back to the main installation when needed.</p></div><p>If you don&#39;t know which one you should use re-visit <a href="./live-setup#check-if-booted-in-bios-or-uefi">Live Setup/Check if booted in BIOS or UEFI</a></p><h2 id="bios" tabindex="-1">BIOS <a class="header-anchor" href="#bios" aria-label="Permalink to &quot;BIOS&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pacman</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> grub</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grub-install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --target=i386-pc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --recheck</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sdX</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grub-mkconfig</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /boot/grub/grub.cfg</span></span></code></pre></div><p><a href="#enable-os-prober">Enable OS Prober</a> also applies here for enabling detection of other operating systems.</p><h2 id="uefi" tabindex="-1">UEFI <a class="header-anchor" href="#uefi" aria-label="Permalink to &quot;UEFI&quot;">​</a></h2><p>You can choose between GRUB or systemd-boot for UEFI systems.</p><h3 id="grub" tabindex="-1">GRUB <a class="header-anchor" href="#grub" aria-label="Permalink to &quot;GRUB&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pacman</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> grub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> efibootmgr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dosfstools</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mtools</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gptfdisk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fatresize</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grub-install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --target=x86_64-efi</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --bootloader-id=grub_uefi</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --efi-directory=/boot/efi</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --recheck</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grub-mkconfig</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /boot/grub/grub.cfg</span></span></code></pre></div><h3 id="enable-os-prober" tabindex="-1">Enable OS Prober <a class="header-anchor" href="#enable-os-prober" aria-label="Permalink to &quot;Enable OS Prober&quot;">​</a></h3><p>To enable other OS detection</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pacman</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> os-prober</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/^#\\?GRUB_DISABLE_OS_PROBER=.*/GRUB_DISABLE_OS_PROBER=false/&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/default/grub</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grub-mkconfig</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /boot/grub/grub.cfg</span></span></code></pre></div><p>See also <a href="https://wiki.archlinux.org/title/GRUB" target="_blank" rel="noreferrer">https://wiki.archlinux.org/title/GRUB</a></p><h3 id="systemd-boot" tabindex="-1">systemd-boot <a class="header-anchor" href="#systemd-boot" aria-label="Permalink to &quot;systemd-boot&quot;">​</a></h3><p>systemd-boot is a simple UEFI boot manager that integrates with systemd. It&#39;s already included with systemd.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bootctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><p>Create the loader configuration file:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /boot/loader/loader.conf</span></span></code></pre></div><p>Add the following:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>default  arch</span></span>
<span class="line"><span>timeout  4</span></span>
<span class="line"><span>editor   0</span></span></code></pre></div><p>Create a boot entry for Arch Linux. First, find your root partition&#39;s PARTUUID (or use the filesystem UUID):</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blkid</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PARTUUID</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> value</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sdXn</span></span></code></pre></div><p>Replace <code>/dev/sdXn</code> with your actual root partition device.</p><p>Create the boot entry:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /boot/loader/entries/arch.conf</span></span></code></pre></div><p>Add the following (replace <code>&lt;your-root-partition-uuid&gt;</code> with the PARTUUID from above). If your ESP is mounted at <code>/boot/efi</code>, ensure <code>linux</code>/<code>initrd</code> paths are correct for that mount:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>title   Arch Linux</span></span>
<span class="line"><span>linux   /vmlinuz-linux</span></span>
<span class="line"><span>initrd  /intel-ucode.img  # or /amd-ucode.img</span></span>
<span class="line"><span>initrd  /initramfs-linux.img</span></span>
<span class="line"><span>options root=PARTUUID/&lt;your-root-partition-uuid&gt; rw</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">Note</p><p>If you&#39;re using encryption or other special configurations, you may need to adjust the <code>options</code> line (e.g. <code>rd.luks.name=... root=/dev/mapper/...</code>). Refer to the <a href="https://wiki.archlinux.org/title/systemd-boot" target="_blank" rel="noreferrer">Arch Wiki</a> for advanced configurations. Consider using systemd&#39;s <code>kernel-install</code> and unified kernel images (UKI) for automatic entry management.</p></div>`,29)])])}const g=a(n,[["render",l]]);export{c as __pageData,g as default};
